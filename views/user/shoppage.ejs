

<%- include('partials/header.ejs') %> 

<div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>

<section class="banner-area organic-breadcrumb">
    <div class="container" style="height: 155px;">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
              
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->
<div class="container">
    <div class="row">
        <div class="col-xl-3 col-lg-4 col-md-5">
            <div class="sidebar-categories">
                <div class="head" ><a href="/shopview?page=1" style="color: white;">All Products</a></div>
                <ul class="main-categories">
                    <% for(let i=0;i<categories.length;i++){ %>
                        <li class="main-nav-list"><a  href="/shopview?cat=<%= categories[i]._id %>" aria-expanded="false" aria-controls=""><span
                            class="lnr lnr-arrow-right"></span><%= categories[i].name %> <span class="number"></span></a>
                <%    } %> 
                    
                       
            </div>
            <div class="sidebar-filter mt-50">
                <div class="top-filter-head">Product Filters</div>
                <div class="common-filter">
                    <div class="head">Brands</div>
                    <form action="#">
                        <ul>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="apple" name="brand"><label for="apple">Adidas<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="asus" name="brand"><label for="asus">Nike<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="gionee" name="brand"><label for="gionee">Puma<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="micromax" name="brand"><label for="micromax">Reebock<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="samsung" name="brand"><label for="samsung">Woodland<span></span></label></li>
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">Color</div>
                    <form action="#">
                        <ul>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="black">Black<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="balckleather">Black
                                    Leather<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="blackred">Black
                                    with red<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="gold">Gold<span></span></label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="spacegrey" name="color"><label for="spacegrey">Spacegrey<span></span></label></li>
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">Price</div>
                    <div class="price-range-area">
                        <div id="price-range"></div>
                        <div class="value-wrapper d-flex">
                            <div class="price">Price:</div>
                            <span>$</span>
                            <div id="lower-value"></div>
                            <div class="to">to</div>
                            <span>$</span>
                            <div id="upper-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9 col-lg-8 col-md-7">
            <!-- Start Filter Bar -->
            <div class="filter-bar d-flex flex-wrap align-items-center">
                <div class="sorting">
                   
                </div>
                <div class="sorting mr-auto">
                   
                </div>
                <div class="pagination">
                    <% if(pagination){ %>
                        <div class="col-lg-12">
                            <div class="pageination">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination justify-content-center">
                                        <li class="page-item d-flex">
                                            
                                                <input type="text" id="pevNum" value="<%= PreviousPage %>" hidden>
                                            <button id="prev" <% if(page==1){%>
                                                   
                                                style="display: none;"
                                                      
                                                <%  } else{ %>
                                                    style="display: inline;"
                                            <%	} %>   class="page-link " onclick="Pagination(1)" aria-label="Previous">
                                                <i class="ti-angle-double-left"></i>
                                            </button>
                                            
                                            <a id="pageeeee" class="page-link"  aria-label="Next">
                                                
                                                <%= page %>
                                            </a>
                                       
                                            <% if(hasNextPage) { %>
                                                <input style="display: inline;" type="text" id="nextNum" value="<%= page+1 %>" hidden>
                                            <button class="page-link" id="nxt" onclick="Pagination(2)"  aria-label="Next">
                                                <i class="ti-angle-double-right"></i>
                                            </button>
                                            <% } %>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    <% } else{ %>
                        <p></p>
                        <% } %> 
                </div>
            </div>
            <!-- End Filter Bar -->
            <!-- Start Best Seller -->
            <section class="lattest-product-area pb-40 category-list">
                <div class="row" id="proos">
                    <!-- single product -->
                    <% for(var i=0;i<productlist.length;i++){ %>
                    <div class="col-lg-4 col-md-6">
                        <div class="single-product">
                            <img class="img-fluid" src="<%= productlist[i].image[0] %> " alt="" style="width: 600px; height: 250px;">
                            <div class="product-details">
                                <h6><%= productlist[i].name %> </h6>
                                <div class="price">
                                    <h6><%= productlist[i].price %> </h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                                <div class="prd-bottom">

                                    <a href="" class="social-info"  onclick="addtoCart('<%=productlist[i]._id %>')">
                                        <span class="ti-bag"></span>
                                        <p class="hover-text">add to bag</p>
                                    </a>
                                    <a href="" class="social-info">
                                        <span class="lnr lnr-heart"></span>
                                        <p class="hover-text">Wishlist</p>
                                    </a>
                                    <a href="" class="social-info">
                                        <span class="lnr lnr-sync"></span>
                                        <p class="hover-text">compare</p>
                                    </a>
                                    <a href="/productdetails/<%= productlist[i]._id %> " class="social-info">
                                        <span class="lnr lnr-move"></span>
                                        <p class="hover-text">view more</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <% } %> 
                    <!-- single product -->
                   
                    <!-- single product -->
                  
                    <!-- single product -->
                   
                    <!-- single product -->
                   
                    <!-- single product -->
                </div>  
            </section>
            <!-- End Best Seller -->
            <!-- Start Filter Bar -->
            <div class="filter-bar d-flex flex-wrap align-items-center">
                <div class="sorting mr-auto">
                    <select>
                        <option value="1">Show 12</option>
                        <option value="1">Show 12</option>
                        <option value="1">Show 12</option>
                    </select>
                </div>
                <div class="pagination">
                    <a href="#" class="prev-arrow"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a>
                    <a href="#" class="active">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#" class="dot-dot"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a>
                    <a href="#">6</a>
                    <a href="#" class="next-arrow"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a>
                </div>
            </div>
            <!-- End Filter Bar -->
        </div>
    </div>
</div>

<!-- Start related-product Area -->
<section class="related-product-area section_gap">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6 text-center">
                <div class="section-title">
                    <h1>Deals of the Week</h1>
                    <p>A fusion of beautiful leathers, strong silhouettes, and impeccable detailing, this collection is for
                         the woman who likes to makes a bold statement in footwear.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-9">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r1.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r2.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r3.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r5.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r6.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r7.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r9.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r10.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-6">
                        <div class="single-related-product d-flex">
                            <a href="#"><img src="/user/img/r11.jpg" alt=""></a>
                            <div class="desc">
                                <a href="#" class="title">Black lace Heels</a>
                                <div class="price">
                                    <h6>$189.00</h6>
                                    <h6 class="l-through">$210.00</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="ctg-right">
                    <a href="#" target="_blank">
                        <img class="img-fluid d-block mx-auto" src="/user/img/category/c5.jpg" alt="">
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<%- include('partials/footer.ejs') %> 

<script>
	async function addtoCart(id){
		await axios.post(`/addtocart?productid=${id}`).then(()=>{
			location.reload();
		})
	}

    function Pagination(pageNum){
			let page = 1
			if(pageNum==1){
               page = document.getElementById('pevNum').value
			   if(page == 1){
				location.href=`/shopview?page=1`
				return
			   }
			}else if(pageNum==2){
				
               page = document.getElementById('nextNum').value
			}
			
            $.ajax({
				url:`/shopview?page=${page}`,
				method:'get',
				success:((res)=>{
                   
					if(res.hasPreviousPage){
                      document.getElementById('prev').style.display='inline'
					  document.getElementById('pevNum').value = res.PreviousPage
					}else{
						document.getElementById('prev').style.display='none'
					}

					if(res.hasNextPage){
						document.getElementById('nxt').style.display ='inline'
					  document.getElementById('nextNum').value = res.page + 1
					}else{
						document.getElementById('nxt').style.display='none'
					}

					document.getElementById('pageeeee').innerHTML= res.page

					document.getElementById('proos').innerHTML=''
					res.productlist.forEach((element,i) => {
						document.getElementById('proos').innerHTML+=`<div class="col-lg-4 col-md-6" id="pross">
							<div class="single-product">
								<img class="img-fluid" src=' ${res.productlist[i].image[0]}' alt="">
								<div class="product-details">
									<h6>  ${res.productlist[i].name }
										</h6>
									<div class="price">
										<h6>${res.productlist[i].price}</h6>
										<h6 class="l-through">${res.productlist[i].brand }</h6>
									</div>
									<div class="prd-bottom">

										<a href="" class="social-info">
                                            <span onclick="addToCart('${ res.productlist[i]._id }')" class="ti-bag"></span>
											
											<p class="hover-text">add to bag</p>
										</a>
										<a href="" class="social-info">
											<span class="lnr lnr-heart"></span>
											<p class="hover-text">Wishlist</p>
										</a>
										<a href="" class="social-info">
											<span class="lnr lnr-sync"></span>
											<p class="hover-text">compare</p>
										</a>
								
                                            <a href="/viewMore?id=${res.productlist[i]._id}" class="social-info">
											<span class="lnr lnr-move"></span>
											<p class="hover-text">view more</p>
										</a>
									</div>
								</div>
							</div>
						</div>`
					});
					

				})
			})
		}
</script>